!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=6)}([function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t);var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.size=t,this.fullSize=t*t,this.grid=this.blankGrid(),this.prevPositions=[]}var t,n,a;return t=e,(n=[{key:"swap",value:function(e){return"B"===e?"W":"W"===e?"B":e}},{key:"blankGrid",value:function(){return"_".repeat(this.fullSize)}},{key:"sPos",value:function(e){return this.size*e[0]+e[1]}},{key:"pos",value:function(e){return[Math.floor(e/this.size),e%this.size]}},{key:"validPos",value:function(e){var t=r(e,2),n=t[0],a=t[1];return!(n<0||a<0)&&n%this.size===n&&a%this.size===a}},{key:"placeStone",value:function(e,t){this.grid=this.grid.slice(0,t)+e+this.grid.slice(t+1)}},{key:"placeManyStones",value:function(e,t){var n=this.grid.split("");return t.forEach((function(t){n[t]=e})),this.grid=n.join("")}},{key:"neighbors",value:function(e){var t=this,n=r(this.pos(e),2),a=n[0],o=n[1],i=[];return[[a,o-1],[a-1,o],[a,o+1],[a+1,o]].forEach((function(e){t.validPos(e)&&i.push(t.sPos(e))})),i}},{key:"findString",value:function(e){for(var t,n=this,r=this.grid[e],a=[],o=[],i=[e];i.length;)t=i.pop(),a.push(t),this.neighbors(t).forEach((function(e){n.grid[e]!==r||a.includes(e)||i.includes(e)||i.push(e),n.grid[e]!==r&&o.push(e)}));return{stoneString:a,bordered:o}}},{key:"captureSurrounded",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.findString(e),a=r.stoneString,o=r.bordered,i=!0;return o.forEach((function(e){"_"===t.grid[e]&&(i=!1)})),i?(n&&this.placeManyStones("_",a),a):[]}},{key:"playMove",value:function(e,t){var n=this,r=e.color,a=this.swap(r),o=this.grid,i=[];if("_"===o[t]){if(this.placeStone(r,t),this.neighbors(t).forEach((function(e){o[e]===a&&(i=i.concat(n.captureSurrounded(e)))})),this.captureSurrounded(t,!1).length)throw this.placeStone("_",t),"Suicide! Try again";if(this.prevPositions.includes(this.grid))throw this.grid=this.prevPositions[this.prevPositions.length-1],"Ko! Invalid move, try again";var s=[];if(i.length)for(var d=0;d<i.length;d++)s.includes(i[d])||s.push(i[d]);return e.captured+=s.length,this.prevPositions.push(this.grid),i}}},{key:"score",value:function(){for(var e=this,t=function(){var t=e.grid.indexOf("_"),n=e.findString(t),r=n.stoneString,a=n.bordered.map((function(t){return e.grid[t].toUpperCase()})),o=!0,i=a[0];i||(o=!1),a.forEach((function(e){e!==i&&(o=!1)})),o?e.placeManyStones(i.toLowerCase(),r):e.placeManyStones(".",r)};this.grid.includes("_");)t();for(var n=this.grid.toUpperCase(),r=0,a=0,o=0;o<n.length;o++)"B"===n[o]&&r++,"W"===n[o]&&a++;return{blackScore:r,whiteScore:a,grid:this.grid}}}])&&o(t.prototype,n),a&&o(t,a),e}();var s=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=t,this.color=n,this.captured=0};function d(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t,n){var r=document.createElement("ul"),a=document.createElement("button"),o=document.createElement("ul");a.id=t.toLowerCase(),o.id="".concat(t.toLowerCase(),"-list"),r.classList.add("dropdown"),a.classList.add("option","drop-button"),o.classList.add("list"),"Author"===t&&a.classList.add("red"),a.innerHTML=t,o.append.apply(o,d(n)),r.append(a,o),e.appendChild(r),a.onclick=function(e,t){return function(e){e.stopPropagation(),u(),t.classList.toggle("show")}}(0,o),document.onclick=u}function u(){for(var e=document.querySelectorAll(".list"),t=0;t<e.length;t++)e[t].classList.contains("show")&&e[t].classList.remove("show")}function p(e){var t=document.getElementById("root"),n=document.createElement("div"),r=document.createElement("div");n.id="instructions-button",r.id="instructions",n.innerHTML='<i class="far fa-question-circle"></i>',function(e){var t=document.createElement("div"),n=document.createElement("h4"),r=document.createElement("ul");n.innerHTML="Getting Started",r.append(h("The board is empty at the beginning of the game."),h("The first player to move is Black."),h("Players alternate turns until the game is over.")),t.append(n,r);var a=document.createElement("div"),o=document.createElement("h4"),i=document.createElement("ul");o.innerHTML="Taking Turns and Capturing",i.append(h("On their turn, a player can either pass their turn or place one stone."),h("Click on any empty intersection to place a stone:"),f("https://cabins-seeds.s3.amazonaws.com/go-move-example.png"),h("To pass your turn, click on your color's information box:"),f("https://cabins-seeds.s3.amazonaws.com/go-pass-example.png"),h("Adjacent stones form a group."),h("A liberty is defined as an empty intersection next to a group."),f("https://cabins-seeds.s3.amazonaws.com/go-liberty-example.png"),h("In this example, the large white group has just one liberty remaining, in the center."),h("When a group has no liberties, it becomes captured and is removed from the board:"),f("https://cabins-seeds.s3.amazonaws.com/go-captured-example.png"),h("Now the black player has filled the last liberty and captured seven white stones."),h("There are two illegal moves: Suicide and Ko."),h("Ko means that a previous position of the board cannot be exactly repeated."),h("Suicide means that a player cannot play a move that results in their own group being captured.")),a.append(o,i);var s=document.createElement("div"),d=document.createElement("h4"),c=document.createElement("ul");d.innerHTML="Ending the game",c.append(h("The game ends when both players pass their turn."),h("The player who commands more territory on the board wins."),f("https://cabins-seeds.s3.amazonaws.com/go-endgame-example.png"),h("A player's territory includes the stones on the board of one color and the empty intersections surrounded by that color.")),s.append(d,c),e.append(t,a,s)}(r),t.appendChild(r),e.appendChild(n),n.onclick=function(e){return function(t){t.stopPropagation(),e.classList.toggle("show");var n=document.querySelector(".board-group").firstChild.getBoundingClientRect(),r=n.top,a=n.left;e.setAttribute("style","top: ".concat(r,"px; left: ").concat(a,"px;"))}}(r),document.onclick=function(e){return function(t){e.classList.contains("show")&&e.classList.remove("show")}}(r)}function m(e,t,n){var r,a=document.createElement("li"),o=document.createElement("a");a.classList.add("link");for(var i=arguments.length,s=new Array(i>3?i-3:0),d=3;d<i;d++)s[d-3]=arguments[d];return(r=o.classList).add.apply(r,s),o.href=e,"string"==typeof t?o.innerHTML=t:o.append(t),v(o,n),o.target="blank",a.appendChild(o),a}function h(e){var t=document.createElement("li");return t.innerHTML=e,t}function f(e){var t=document.createElement("img");return t.src=e,t}function v(e,t){e.title=t,e.addEventListener("mouseover",y),e.addEventListener("mouseout",g)}function y(){var e=this.title;this.title="",this.setAttribute("tooltip",e);var t=document.createElement("div");t.classList.add("tooltip"),t.append(e),document.body.firstChild.before(t),t.setAttribute("style","max-width: 13em");var n=this.getBoundingClientRect(),r=t.getBoundingClientRect(),a=n.top+(n.height+15),o=n.left+n.width/2-r.width/2;t.setAttribute("style","max-width: 13em; top: ".concat(a,"px; left: ").concat(o,"px;"))}function g(){var e=this.getAttribute("tooltip");this.title=e,this.removeAttribute("tooltip"),document.querySelector(".tooltip").remove()}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var E,w,L=new s("black","B"),k=new s("white","W"),S={B:L,W:k},C=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.currentPlayer=L,this.board=new i(t),this.reset(),this.drawGame(t),this.passTurn=this.passTurn.bind(this),this.newGame=n.bind(this)}var t,n,r;return t=e,(n=[{key:"reset",value:function(){L.captured=0,k.captured=0}},{key:"drawGame",value:function(e){var t=document.createElement("div");t.id="game",t.classList.add("black"),p(t),this.drawBoard(e,t),this.drawPlayers(e,t),document.getElementById("root").appendChild(t),this.drawStars(e)}},{key:"addCell",value:function(e,t){var n=document.createElement("div");n.classList.add("cell"),n.dataset.stone=t,e.appendChild(n)}},{key:"drawPlayers",value:function(e,t){var n=document.createElement("div"),r=document.createElement("div"),a=document.createElement("div"),o=document.createElement("div"),i=document.createElement("div");n.classList.add("players"),r.classList.add("player","black"),a.classList.add("player","white"),o.classList.add("captured"),i.classList.add("captured"),n.dataset.pass=!1,r.dataset.player="B",a.dataset.player="W",o.innerHTML="".concat(L.captured),i.innerHTML="".concat(k.captured),this.addCell(r,"B"),this.addCell(a,"W"),r.appendChild(o),a.appendChild(i),n.append(r,a),t.appendChild(n)}},{key:"drawBoard",value:function(e,t){var n=document.createElement("div"),r=document.createElement("ul");n.classList.add("board-group"),r.classList.add("board","s".concat(e));for(var a=0,o=0;o<e;o++){var i=document.createElement("ul");i.className="row";for(var s=0;s<e;s++){var d=document.createElement("div");d.classList.add("cell"),d.dataset.index=a,d.dataset.stone="_",i.appendChild(d),a++}r.appendChild(i)}n.appendChild(r),t.appendChild(n)}},{key:"drawStars",value:function(e){var t=[];switch(e){case"5":t=[12];break;case"9":t=[20,24,40,56,60];break;case"13":t=[42,48,84,120,126];break;case"19":t=[60,66,72,174,180,186,288,294,300]}t.forEach((function(e){document.querySelector('[data-index="'.concat(e,'"]')).classList.add("star")}))}},{key:"play",value:function(){var e=this.addPassListeners();document.querySelector(".board").addEventListener("click",this.playTurn(this.board,e))}},{key:"swap",value:function(){this.currentPlayer===L?this.currentPlayer=k:this.currentPlayer=L;var e=document.querySelector("#game");e.classList.toggle("white"),e.classList.toggle("black")}},{key:"playTurn",value:function(e,t){var n=this;return function(r){r.preventDefault();var a=n.currentPlayer,o=a.color,i=a.name;if(r.target.classList.contains("cell")){var s=parseInt(r.target.dataset.index);try{var d=e.playMove(a,s);if(d){n.clearErrors(),r.target.dataset.stone=o,d.forEach((function(e){document.querySelector('[data-index="'.concat(e,'"]')).dataset.stone="_"})),t[0](),t[1]();var c=document.querySelector(".players");if("true"===c.dataset.pass){var l="W"===o?"B":"W",u="W"===o?0:1,p=document.querySelector('[data-player="'.concat(l,'"]'));t[u]=n.resetPassListeners(p),c.dataset.pass=!1}document.querySelector(".player.".concat(i)).childNodes[1].innerHTML="".concat(a.captured),n.swap()}}catch(e){n.renderError(e)}}}}},{key:"addPassListeners",value:function(){var e=this,t=[];return document.querySelectorAll(".player").forEach((function(n){var r=[e.offerPass(n),e.notPass(n)];t.push(r[1]),n.addEventListener("mouseover",r[0]),n.addEventListener("mouseout",r[1]),n.onclick=e.passTurn(n,r)})),t}},{key:"resetPassListeners",value:function(e){var t=[this.offerPass(e),this.notPass(e)];return e.addEventListener("mouseover",t[0]),e.addEventListener("mouseout",t[1]),e.onclick=this.passTurn(e,t),t[1]}},{key:"offerPass",value:function(e){var t=this;return function(){e.dataset.player===t.currentPlayer.color&&(e.childNodes[1]&&e.removeChild(e.childNodes[1]),e.classList.add("pass"),e.dataset.pass=!0)}}},{key:"notPass",value:function(e){return function(){if("true"===e.dataset.pass){e.dataset.pass=!1,e.classList.remove("pass");var t=document.createElement("div");t.classList.add("captured");var n=S[e.dataset.player];t.innerHTML="".concat(n.captured),e.appendChild(t)}}}},{key:"passTurn",value:function(e,t){var n=this;return function(r){if(e.dataset.player===n.currentPlayer.color){r.preventDefault,n.clearErrors();var a=document.querySelector(".players");"true"===a.dataset.pass?n.endGame(a):(a.dataset.pass=!0,e.classList.add("pass"),e.removeEventListener("mouseover",t[0]),e.removeEventListener("mouseout",t[1]),n.swap())}}}},{key:"renderError",value:function(e){var t=document.querySelector(".board"),n=document.getElementById("error");n||((n=document.createElement("h3")).id="error",t.after(n)),n.innerHTML=e}},{key:"clearErrors",value:function(){for(var e=document.querySelector(".board-group"),t=document.getElementById("error");t;)e.removeChild(t),t=document.getElementById("error")}},{key:"endGame",value:function(e){var t=document.getElementById("root"),n=document.getElementById("instructions-button"),r=document.getElementById("instructions");t.removeChild(r);var a=document.querySelector("#game");a.classList.add("over"),a.removeChild(n),a.removeChild(e),this.drawScore()}},{key:"drawScore",value:function(){var e=this.board.score(),t=e.blackScore,n=e.whiteScore,r=e.grid,a=document.querySelector(".board-group"),o=document.createElement("div"),i=document.createElement("div"),s=document.createElement("h2"),d=document.createElement("div"),c=document.createElement("div"),l=document.createElement("div"),u=document.createElement("div"),p=document.createElement("div"),m=document.createElement("div"),h=document.createElement("button");o.classList.add("endgame"),d.classList.add("table"),c.classList.add("totals","board","black"),l.classList.add("totals","board","white"),u.classList.add("total-box"),p.classList.add("total-box"),s.innerHTML=t>n?"Black wins!":t<n?"White wins!":"Draw!",i.id="endgame-header",i.appendChild(s),h.innerHTML="Home",h.onclick=this.newGame,m.id="board-footer",m.appendChild(h),this.addCell(c,"B"),this.addCell(l,"W"),this.addScore(u,t),this.addScore(p,n),this.addCaptured(u,"B"),this.addCaptured(p,"W"),c.appendChild(u),l.appendChild(p),d.append(c,l);for(var f=0;f<r.length;f++)document.querySelector('[data-index="'.concat(f,'"]')).dataset.stone=r[f];window.matchMedia("(max-height: 550px)").matches?m.append(i):o.append(i),o.append(d),a.before(o),a.appendChild(m)}},{key:"addCaptured",value:function(e,t){var n=document.createElement("div"),r=document.createElement("h3"),a=document.createElement("h2");n.classList.add("total"),r.innerHTML="Captured:",a.innerHTML="".concat(S[t].captured),n.append(r,a),e.append(n)}},{key:"addScore",value:function(e,t){var n=document.createElement("div"),r=document.createElement("h3"),a=document.createElement("h2");n.classList.add("total"),r.innerHTML="Score:",a.innerHTML="".concat(t),n.append(r,a),e.append(n)}}])&&b(t.prototype,n),r&&b(t,r),e}(),T=(n(0),n(1),n(2),n(3),n(4),n(5),document.getElementById("root")),M=window.matchMedia("(max-height: 550px)");function x(){var e=document.getElementById("game"),t=document.querySelector(".new-game"),n=document.getElementById("back");e&&T.removeChild(e),t&&T.removeChild(t),n&&T.removeChild(n);var r,a=document.createElement("ul"),o=document.createElement("button");a.id="options",o.id="play",o.classList.add("option"),o.innerHTML="Play",o.onclick=B,a.appendChild(o),l(a,"About",(r=m("https://en.wikipedia.org/wiki/History_of_Go",'<i class="fab fa-wikipedia-w"></i>',"Wikipedia: the History of Go","wikipedia"),[m("https://www.usgo.org/",f("https://www.usgo.org/theme/images/agalogo2.png"),"The American Go Association. Founded in New York City in 1935, AGA is one of the oldest Western Go associations.","aga"),r,m("https://deepmind.com/research/case-studies/alphago-the-story-so-far",f("https://upload.wikimedia.org/wikipedia/commons/1/12/DeepMind_logo.png"),"AlphaGo: The project at Google's DeepMind that created the first program capable of defeating a Go world champion in 2016. Their story inspired this project!","deepMind")])),l(a,"Author",function(){var e=document.createElement("h3");e.classList.add("red"),e.innerHTML="Donald Herndon";var t=document.createElement("ul");t.id="author-links";var n=m("https://github.com/herndal/go",'<i class="fab fa-github-square"></i>',"My Github repository for this project"),r=m("https://www.linkedin.com/in/donald-herndon-8364b01a5/",'<i class="fab fa-linkedin"></i>',"My LinkedIn"),a=m("https://twitter.com/donald_builds",'<i class="fab fa-twitter-square"></i>',"My Twitter");return t.append(n,r,a),[e,t]}()),T.appendChild(a),P(M)}function B(){var e=document.getElementById("options");T.removeChild(e);var t=document.createElement("div"),n=document.createElement("select"),r=document.createElement("p"),a=document.createElement("option"),o=document.createElement("option"),i=document.createElement("option"),s=document.createElement("option"),d=document.createElement("button"),c=document.createElement("form");t.classList.add("new-game"),n.id="size",c.id="play",a.value="5",o.value="9",i.value="13",s.value="19",r.innerHTML="Choose the size of your board",a.innerHTML="5 x 5",o.innerHTML="9 x 9",i.innerHTML="13 x 13",s.innerHTML="19 x 19",d.innerHTML="Start Game",n.append(a,o,i,s),c.append(n,d),t.append(r,document.createElement("hr"),c),T.append(t,function(){var e=document.createElement("button"),t=document.createElement("span");return t.classList.add("back-go","red"),e.id="back",t.innerHTML="back",e.onclick=x,e.append("Go ",t),e}()),document.querySelector("#play").addEventListener("submit",function(e){return function(t){t.preventDefault();var n=document.getElementById("size").value,r=new C(n,x);T.removeChild(e),T.removeChild(back),document.body.removeChild(document.getElementsByTagName("footer")[0]),P(M),r.play()}}(t))}function P(e){var t=document.getElementById("root"),n=!1,r=document.getElementById("game");r&&(n=r.classList.contains("over"));var a=document.getElementById("title");if(e.matches&&r){if(a&&t.removeChild(a),n){var o=document.getElementById("board-footer"),i=document.getElementById("endgame-header");i.remove(),o.appendChild(i)}}else{if(!a){(a=document.createElement("div")).id="title";var s=document.createElement("h1");s.innerHTML="Go",a.appendChild(s),t.firstChild.before(a)}if(n){var d=document.querySelector(".table"),c=document.getElementById("endgame-header");c.remove(),d.before(c)}}var l=document.getElementById("instructions");if(l&&l.classList.contains("show")){var u=document.querySelector(".board-group").firstChild.getBoundingClientRect(),p=u.top,m=u.left;l.setAttribute("style","top: ".concat(p,"px; left: ").concat(m,"px;"))}}E=document.createElement("div"),w=document.createElement("h1"),E.id="title",w.innerHTML="Go",E.appendChild(w),T.append(E),x(),M.addListener(P)}]);
//# sourceMappingURL=main.js.map