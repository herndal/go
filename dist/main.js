!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=5)}([function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t);var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.size=t,this.fullSize=t*t,this.grid=this.blankGrid(),this.prevPositions=[]}var t,n,a;return t=e,(n=[{key:"swap",value:function(e){return"B"===e?"W":"W"===e?"B":e}},{key:"blankGrid",value:function(){return"_".repeat(this.fullSize)}},{key:"sPos",value:function(e){return this.size*e[0]+e[1]}},{key:"pos",value:function(e){return[Math.floor(e/this.size),e%this.size]}},{key:"validPos",value:function(e){var t=r(e,2),n=t[0],a=t[1];return!(n<0||a<0)&&n%this.size===n&&a%this.size===a}},{key:"placeStone",value:function(e,t){this.grid=this.grid.slice(0,t)+e+this.grid.slice(t+1)}},{key:"placeManyStones",value:function(e,t){var n=this.grid.split("");return t.forEach((function(t){n[t]=e})),this.grid=n.join("")}},{key:"neighbors",value:function(e){var t=this,n=r(this.pos(e),2),a=n[0],o=n[1],i=[];return[[a,o-1],[a-1,o],[a,o+1],[a+1,o]].forEach((function(e){t.validPos(e)&&i.push(t.sPos(e))})),i}},{key:"findString",value:function(e){for(var t,n=this,r=this.grid[e],a=[],o=[],i=[e];i.length;)t=i.pop(),a.push(t),this.neighbors(t).forEach((function(e){n.grid[e]!==r||a.includes(e)||i.includes(e)||i.push(e),n.grid[e]!==r&&o.push(e)}));return{stoneString:a,bordered:o}}},{key:"captureSurrounded",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.findString(e),a=r.stoneString,o=r.bordered,i=!0;return o.forEach((function(e){"_"===t.grid[e]&&(i=!1)})),i?(n&&this.placeManyStones("_",a),a):[]}},{key:"playMove",value:function(e,t){var n=this,r=e.color,a=this.swap(r),o=this.grid,i=[];if("_"===o[t]){if(this.placeStone(r,t),this.neighbors(t).forEach((function(e){o[e]===a&&(i=i.concat(n.captureSurrounded(e)))})),this.captureSurrounded(t,!1).length)throw this.placeStone("_",t),"Suicide! Try again";if(this.prevPositions.includes(this.grid))throw this.grid=this.prevPositions[this.prevPositions.length-1],"Ko! Invalid move, try again";return e.captured+=i.length,this.prevPositions.push(this.grid),i}}},{key:"score",value:function(){for(var e=this,t=function(){var t=e.grid.indexOf("_"),n=e.findString(t),r=n.stoneString,a=n.bordered.map((function(t){return e.grid[t].toUpperCase()})),o=!0,i=a[0];i||(o=!1),a.forEach((function(e){e!==i&&(o=!1)})),o?e.placeManyStones(i.toLowerCase(),r):e.placeManyStones(".",r)};this.grid.includes("_");)t();for(var n=this.grid.toUpperCase(),r=0,a=0,o=0;o<n.length;o++)"B"===n[o]&&r++,"W"===n[o]&&a++;return{blackScore:r,whiteScore:a,grid:this.grid}}}])&&o(t.prototype,n),a&&o(t,a),e}();var s=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=t,this.color=n,this.captured=0};function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var d=new s("black","B"),l=new s("white","W"),u={B:d,W:l},p=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.currentPlayer=d,this.board=new i(t),this.reset(),this.drawGame(t),this.passTurn=this.passTurn.bind(this),this.newGame=n.bind(this)}var t,n,r;return t=e,(n=[{key:"reset",value:function(){d.captured=0,l.captured=0}},{key:"drawGame",value:function(e){var t=document.createElement("div");t.id="game",t.classList.add("black"),this.drawBoard(e,t),this.drawPlayers(e,t),document.getElementById("root").appendChild(t),this.drawStars(e)}},{key:"addCell",value:function(e,t){var n=document.createElement("div");n.classList.add("cell"),n.dataset.stone=t,e.appendChild(n)}},{key:"drawPlayers",value:function(e,t){var n=document.createElement("div"),r=document.createElement("div"),a=document.createElement("div"),o=document.createElement("div"),i=document.createElement("div");switch(n.classList.add("players"),r.classList.add("player","black"),a.classList.add("player","white"),o.classList.add("captured"),i.classList.add("captured"),n.dataset.pass=!1,r.dataset.player="B",a.dataset.player="W",o.innerHTML="".concat(d.captured),i.innerHTML="".concat(l.captured),e){case"5":n.style.width="210px";break;case"9":n.style.width="250px";break;case"13":n.style.width="310px";break;case"19":n.style.width="410px"}this.addCell(r,"B"),this.addCell(a,"W"),r.appendChild(o),a.appendChild(i),n.append(r,a),t.appendChild(n)}},{key:"drawBoard",value:function(e,t){var n=document.createElement("ul");n.classList.add("board"),n.style.width="".concat(30*e+2,"px"),n.style.height="".concat(30*e+2,"px");for(var r=0,a=0;a<e;a++){var o=document.createElement("ul");o.className="row";for(var i=0;i<e;i++){var s=document.createElement("div");s.classList.add("cell"),s.dataset.index=r,s.dataset.stone="_",o.appendChild(s),r++}n.appendChild(o)}t.appendChild(n)}},{key:"drawStars",value:function(e){var t=[];switch(e){case"5":t=[12];break;case"9":t=[20,24,40,56,60];break;case"13":t=[42,48,84,120,126];break;case"19":t=[60,66,72,174,180,186,288,294,300]}t.forEach((function(e){document.querySelector('[data-index="'.concat(e,'"]')).classList.add("star")}))}},{key:"play",value:function(){var e=this.addPassListeners();document.querySelector(".board").addEventListener("click",this.playTurn(this.board,e))}},{key:"swap",value:function(){this.currentPlayer===d?this.currentPlayer=l:this.currentPlayer=d;var e=document.querySelector("#game");e.classList.toggle("white"),e.classList.toggle("black")}},{key:"playTurn",value:function(e,t){var n=this;return function(r){r.preventDefault();var a=n.currentPlayer,o=a.color,i=a.name;if(r.target.classList.contains("cell")){var s=parseInt(r.target.dataset.index);try{var c=e.playMove(a,s);if(c){n.clearErrors(),r.target.dataset.stone=o,c.forEach((function(e){document.querySelector('[data-index="'.concat(e,'"]')).dataset.stone="_"})),t[0](),t[1]();var d=document.querySelector(".players");if("true"===d.dataset.pass){var l="W"===o?"B":"W",u="W"===o?0:1,p=document.querySelector('[data-player="'.concat(l,'"]'));t[u]=n.resetPassListeners(p),d.dataset.pass=!1}document.querySelector(".player.".concat(i)).childNodes[1].innerHTML="".concat(a.captured),n.swap()}}catch(e){n.renderError(e)}}}}},{key:"addPassListeners",value:function(){var e=this,t=[];return document.querySelectorAll(".player").forEach((function(n){var r=[e.offerPass(n),e.notPass(n)];t.push(r[1]),n.addEventListener("mouseover",r[0]),n.addEventListener("mouseout",r[1]),n.onclick=e.passTurn(n,r)})),t}},{key:"resetPassListeners",value:function(e){var t=[this.offerPass(e),this.notPass(e)];return e.addEventListener("mouseover",t[0]),e.addEventListener("mouseout",t[1]),e.onclick=this.passTurn(e,t),t[1]}},{key:"offerPass",value:function(e){var t=this;return function(){e.dataset.player===t.currentPlayer.color&&(e.childNodes[1]&&e.removeChild(e.childNodes[1]),e.classList.add("pass"),e.dataset.pass=!0)}}},{key:"notPass",value:function(e){return function(){if("true"===e.dataset.pass){e.dataset.pass=!1,e.classList.remove("pass");var t=document.createElement("div");t.classList.add("captured");var n=u[e.dataset.player];t.innerHTML="".concat(n.captured),e.appendChild(t)}}}},{key:"passTurn",value:function(e,t){var n=this;return function(r){if(e.dataset.player===n.currentPlayer.color){r.preventDefault,n.clearErrors();var a=document.querySelector(".players");"true"===a.dataset.pass?n.endGame(a):(a.dataset.pass=!0,e.classList.add("pass"),e.removeEventListener("mouseover",t[0]),e.removeEventListener("mouseout",t[1]),n.swap())}}}},{key:"renderError",value:function(e){var t=document.querySelector(".board"),n=document.createElement("h3");n.id="error",n.innerHTML=e,t.after(n)}},{key:"clearErrors",value:function(){for(var e=document.getElementById("game"),t=document.getElementById("error");t;)e.removeChild(t),t=document.getElementById("error")}},{key:"endGame",value:function(e){document.querySelector("#game").removeChild(e),this.drawScore()}},{key:"drawScore",value:function(){var e=this.board.score(),t=e.blackScore,n=e.whiteScore,r=e.grid,a=document.querySelector(".board"),o=document.createElement("div"),i=document.createElement("h2"),s=document.createElement("div"),c=document.createElement("div"),d=document.createElement("div"),l=document.createElement("button");o.classList.add("endgame"),s.classList.add("table"),c.classList.add("totals","board","black"),d.classList.add("totals","board","white"),i.innerHTML=t>n?"Black wins!":t<n?"White wins!":"It's a draw!",l.innerHTML="Home",l.onclick=this.newGame,this.addCell(c,"B"),this.addCell(d,"W"),this.addScore(c,t),this.addScore(d,n),this.addCaptured(c,"B"),this.addCaptured(d,"W"),s.append(c,d),o.append(i,s);for(var u=0;u<r.length;u++)document.querySelector('[data-index="'.concat(u,'"]')).dataset.stone=r[u];a.before(o),a.after(l)}},{key:"addCaptured",value:function(e,t){var n=document.createElement("div"),r=document.createElement("h3"),a=document.createElement("h2");n.classList.add("total"),r.innerHTML="Captured:",a.innerHTML="".concat(u[t].captured),n.append(r,a),e.append(n)}},{key:"addScore",value:function(e,t){var n=document.createElement("div"),r=document.createElement("h3"),a=document.createElement("h2");n.classList.add("total"),r.innerHTML="Score:",a.innerHTML="".concat(t),n.append(r,a),e.append(n)}}])&&c(t.prototype,n),r&&c(t,r),e}();function m(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t,n){var r=document.createElement("ul"),a=document.createElement("button"),o=document.createElement("ul");a.id=t.toLowerCase(),o.id="".concat(t.toLowerCase(),"-list"),r.classList.add("dropdown"),a.classList.add("option","drop-button"),o.classList.add("list"),"Author"===t&&a.classList.add("red"),a.innerHTML=t,o.append.apply(o,m(n)),r.append(a,o),e.appendChild(r),a.onclick=function(e,t){return function(e){e.stopPropagation(),v(),t.classList.contains("show")||t.classList.add("show")}}(0,o),document.onclick=v}function v(){for(var e=document.querySelectorAll(".list"),t=0;t<e.length;t++)e[t].classList.contains("show")&&e[t].classList.remove("show")}n(0),n(1),n(2),n(3),n(4);var y,b=document.getElementById("root");function g(){var e=document.getElementById("game"),t=document.querySelector(".new-game"),n=document.getElementById("back");e&&b.removeChild(e),t&&b.removeChild(t),n&&b.removeChild(n);var r,a,o,i,s,c,d,l=document.createElement("ul"),u=document.createElement("button");l.id="options",u.id="play",u.classList.add("option"),u.innerHTML="Play",u.onclick=E,l.appendChild(u),h(l,"About",["wikipedia","american go association"]),h(l,"Author",(r=[],a=document.createElement("h3"),o=document.createElement("ul"),i=document.createElement("li"),s=document.createElement("li"),c=document.createElement("li"),d=document.createElement("li"),o.id="author-links",i.classList.add("link"),s.classList.add("link"),c.classList.add("link"),d.classList.add("link"),a.classList.add("red"),a.innerHTML="Donald Herndon",i.innerHTML="GH",s.innerHTML="LI",c.innerHTML="AL",d.innerHTML="TW",o.append(i,s,c,d),r.push(o,a),r)),b.appendChild(l)}function E(){var e=document.getElementById("options");b.removeChild(e);var t=document.createElement("div"),n=document.createElement("select"),r=document.createElement("p"),a=document.createElement("option"),o=document.createElement("option"),i=document.createElement("option"),s=document.createElement("option"),c=document.createElement("button"),d=document.createElement("form"),l=document.createElement("button"),u=document.createElement("span");t.classList.add("new-game"),u.classList.add("back-go","red"),n.id="size",d.id="play",l.id="back",a.value="5",o.value="9",i.value="13",s.value="19",r.innerHTML="Choose the size of your board",a.innerHTML="5 x 5",o.innerHTML="9 x 9",i.innerHTML="13 x 13",s.innerHTML="19 x 19",c.innerHTML="Start Game",u.innerHTML="back",l.onclick=g,l.append("Go ",u),n.append(a,o,i,s),d.append(n,c),t.append(r,document.createElement("hr"),d),b.append(t,l),document.querySelector("#play").addEventListener("submit",L(t))}function L(e){return function(t){t.preventDefault();var n=document.getElementById("size").value,r=new p(n,g,E);b.removeChild(e),b.removeChild(back),r.play()}}(y=document.createElement("h1")).innerHTML="Go",b.append(y),g()}]);
//# sourceMappingURL=main.js.map